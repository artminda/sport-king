$(function(){$(".btn-edit").on("click touch",function(){var par=$(this).parents(".navMain");par.toggleClass("list-on");$("#wrapper").scroll(function(){var log=$(".navMain");if(log.hasClass("list-on")){log.removeClass("list-on");}else{}});});$("#gotop").click(function(e){$("#page-content-wrapper").scrollTop();});$("#menu-toggle").click(function(e){e.preventDefault();$("#wrapper").toggleClass("toggled");});$('[data-toggle="tooltip"]').tooltip('show');$("input").focusin(function(e){$(this).parent().prev("label").css('color','#ff9334');});$("input").focusout(function(e){$(this).parent().prev("label").css('color','#888');});var thousandComma=function(number){var num=number.toString();var pattern=/(-?\d+)(\d{3})/;while(pattern.test(num)){num=num.replace(pattern,"$1,$2");}
return num;}
$("[data-target='#modal-sm']").click(function(e){$("span.cat").text(thousandComma($(this).attr("data-cat")));$("span.nt").text(thousandComma($(this).attr("data-nt")));$('#stored_nt').val($(this).attr("data-nt"));$('#stored_cat').val($(this).attr("data-cat"));});$('.counter').counterUp({delay:10,time:1000});$('.payment-box').click(function(e){$('.payment-box').removeClass('selected');$(this).addClass('selected');$('#payment_value').val($(this).attr('temp-value'));});$('#tform1').submit(function(e){e.preventDefault();if($('#laccount').val()!=''&&$('#lpassword').val()!=''){$.ajax({url:$('#f1_url').val(),data:{naccount:$('#laccount').val(),npassword:$('#lpassword').val()},type:'POST',dataType:'text'}).error(function(data){message_fun('登入錯誤!!');}).success(function(data){if(data=='1'){message_fun('登入成功!!',1);}else if(data=='3'){message_fun('帳號被封鎖！！');}else{message_fun('登入錯誤!!');$('#npassword').val('');}});}else{message_fun('請輸入帳號、密碼');}});var pattern=/^[a-zA-Z0-9]{6,12}$/;$('#tform3').submit(function(e){e.preventDefault();if($('#fbname').val()!=''&&$('#naccount').val()!=''&&pattern.test($('#naccount').val())&&$('#npassword1').val()!=''&&pattern.test($('#npassword1').val())&&$('#npassword2').val()!=''&&$('#npassword1').val()==$('#npassword2').val()&&$('#ncheck').prop('checked')){$.ajax({url:$('#f3_url').val(),data:{fbname:$('#fbname').val(),naccount:$('#naccount').val(),npassword1:$('#npassword1').val(),npassword2:$('#npassword2').val()},type:'POST',dataType:'text'}).error(function(data){message_fun('加入錯誤!!');}).success(function(data){if(data=='1'){message_fun('加入成功!!',1);}else if(data=='2'){message_fun('帳號已存在');}else{message_fun('加入錯誤!!'+data);}});}else{if($('#fbname').val()==''){message_fun('請輸入暱稱');}else if($('#naccount').val()==''||!pattern.test($('#naccount').val())){message_fun('請輸入帳號(6~12字英文數字組合)');}else if($('#npassword1').val()==''||$('#npassword2').val()==''||!pattern.test($('#npassword1').val())||$('#npassword1').val()!=$('#npassword2').val()){message_fun('請輸入密碼(6~12字英文數字組合)與確認密碼並一致');}else if(!$('#ncheck').prop('checked')){message_fun('需同意運彩貓會員條款');}}});$('#tform2').submit(function(e){e.preventDefault();if($('#f2_code').val()!=''&&/^[A-Z0-9]{6}$/.test($('#f2_code').val())){$.ajax({url:$('#f2_url2').val(),data:{f2_code:$('#f2_code').val()},type:'POST',dataType:'text'}).error(function(data){message_fun('驗證送出失敗!!');}).success(function(data){if(data=='1'){message_fun('驗證成功!!',1);}else{message_fun('驗證錯誤!!');}});}else{message_fun('資料抓取失敗');}});$('#logout_click').click(function(e){e.preventDefault();$.ajax({url:$('#mem_out').val(),dataType:'text'}).error(function(data){message_fun('登出失敗!!');}).success(function(data){if(data=='1'){message_fun('登出成功!!',1);}else{message_fun('登出失敗!!');}});});var ex_show_try=1;$('#ex_show').click(function(e){e.preventDefault();if(ex_show_try==1){ex_show_try=0;$.ajax({url:$('#show_url').val()+$('#mid').val(),data:{spg:$('#show_page').val()},type:'POST',dataType:'text'}).error(function(data){message_fun('傳輸錯誤!!');ex_show_try=1;}).success(function(data){$('#show_mark').before(data);if(data==''){$('#show_mark').addClass('show_hide');}else{var aa=$('#show_page').val();aa++;$('#show_page').val(aa);}
ex_show_try=1;});}});var nex_show_try=1;$('#nex_show').click(function(e){e.preventDefault();if(nex_show_try==1){nex_show_try=0;$.ajax({url:$('#show_url').val(),data:{spg:$('#show_page').val()},type:'POST',dataType:'json'}).error(function(data){message_fun('傳輸錯誤!!');nex_show_try=1;}).success(function(data){if(data.nif==0){$('#show_mark').addClass('show_hide');}
$('#show_mark').before(data.nvalue);var aa=$('#show_page').val();aa++;$('#show_page').val(aa);nex_show_try=1;});}});$('#cform1').submit(function(e){if($('#nchange').val()!=0&&$('#fbname').val()!=''){message_fun('暱稱僅能修改一次');return false;}else if(($('#npass1').val()!=''||$('#npass2').val()!='')&&$('#npass1').val()!=$('#npass2').val()){if(!pattern.test($('#npass1').val())||$('#npass1').val().length>12||$('#npass1').val().length<6){message_fun('密碼為6~12字英文數字組合');}else{message_fun('密碼與確認密碼不相同');}
return false;}else if($('#fbname').val()!=''||($('#npass1').val()!=''&&$('#npass1').val()!='')||$('#nimage').val()!=''){$('#frame_upload').load(function(){var return_str=$(this).contents().find('body').html();switch(return_str){case '1':message_fun('儲存成功',1);break;default:if(return_str.indexOf(',')>0){sarray=return_str.split(',');sstr='';for(var i=1;i<sarray.length;i++){if(sstr!=''){sstr+='、';}
if(sarray[i]=='0'){sstr+='個人照片上傳失敗';}}
if(sarray[0]=='1'){message_fun('儲存成功('+sstr+')',1);}else{message_fun('儲存錯誤!!('+sstr+')');}}else{message_fun('儲存錯誤!!');}}
$('#frame_upload').remove();$('#cform1').after('<iframe style="display:none;" id="frame_upload" name="frame_upload"></iframe>');});}else{message_fun('暱稱、密碼、照片，至少需修改一項資料才能儲存');return false;}});function preview(input){if(input.files&&input.files[0]){var reader=new FileReader();reader.onload=function(e){$('#tem_img').css('background-image','url('+e.target.result+')');}
reader.readAsDataURL(input.files[0]);}}
$('#nimage').on('change',function(){preview(this);})});function phone_send(){if($('#f2_phone').val()!=''&&/^[0-9]{2}[0-9]{8}$/.test($('#f2_phone').val())){$.ajax({url:$('#f2_url1').val(),data:{f2_phone:$('#f2_phone').val()},type:'POST',dataType:'text'}).error(function(data){message_fun('驗證碼傳送失敗!!');}).success(function(data){if(data=='1'){message_fun('驗證碼傳成功!!');}else if(data=='3'){message_fun('手機號碼與其他人相同，請重新輸入');}else{message_fun('驗證碼傳送失敗!!');}});}else{message_fun('手機號碼格式錯誤');}}
function sopping_ck(a,b,c){if(c==1){show_str='解鎖';}else{show_str='購買';}
if(true){$.ajax({url:$('#shopping_url').val()+$('#mid').val(),data:{wreid:a,nconsumption:b},type:'POST',dataType:'text',}).error(function(data){message_fun('傳輸錯誤!!');}).success(function(data){if(data=='1'){if(c==1){message_fun('感謝'+show_str,1);}else{message_fun('感謝'+show_str+'，為表負責若此場分析不正確點數將全數退回!',1);}}else if(data=='2'){message_fun('不好意思，你的點數不足喔!!(將自動轉到儲值頁面)',1,1);}else if(data=='4'){message_fun('已開賽無法購買');}else{message_fun(show_str+'失敗!!');}});}}
function sopping_combo(a,b){if(true){$.ajax({url:$('#combo_url').val()+$('#mid').val(),data:{nday:a,nconsumption:b},type:'POST',dataType:'text'}).error(function(data){message_fun('傳輸錯誤!!');}).success(function(data){if(data=='1'){message_fun('購買成功!!',1);}else if(data=='2'){message_fun('不好意思，你的點數不足喔!!(將自動轉到儲值頁面)',1,1);}else if(data=='4'){message_fun('包牌期間無法再包牌!!');}else{message_fun('購買失敗!!');}});}}
function sopping_mypredict(a,b,c){$.ajax({url:$('#combo_url').val()+$('#uid').val(),data:{ndatetime:c},type:'POST',dataType:'text'}).error(function(data){message_fun('傳輸錯誤!!');}).success(function(data){if(data=='1'){message_fun('購買成功!!',1);}else if(data=='2'){message_fun('不好意思，你的點數不足喔!!(將自動轉到儲值頁面)',1,1);}else if(data=='4'){message_fun('購買期間無法再購買!!');}else{message_fun('購買失敗!!');}});}
function vote_ck(a,b){var str='確定按神？';if(b==-1)
str='確定按糗？';if(true){$.ajax({url:$('#vote_url').val(),data:{waid:a,nvote:b},type:'POST',dataType:'text'}).error(function(data){message_fun('傳輸錯誤!!');}).success(function(data){if(data=='1'){message_fun('投票成功!!',1);}else if(data=='2'){message_fun('投票失敗!!');}else{if(data=='請先登入'){$('#login').click();}else{message_fun(data);}}});}}
function visitors_add_show(a,b){$.ajax({url:'index.php/welcome/visitors_add',data:{impur:a},type:'POST',dataType:'text'}).error(function(data){document.location.href=$(b).attr('ahref');}).success(function(data){document.location.href=$(b).attr('ahref');});}
var message_if=0;var message_url=0;function message_fun(a,b,c,d){b=b||0;c=c||0;d=d||'';$('#message_value').text(a);$("#show_button").click();if(d!==''){$('#url_stored').val(d);}
message_if=b;message_url=c;}
function reload_fun(){if(message_if==1){if(message_url==1){document.location.href=$('#url_stored').val();}else if(message_url==2){document.location.href=$('#doing_stored').val();}else{window.location.reload();}}}
function confirm_fun(a,b,c,d,e){e=e||0;$('#confirm_value').text(d);if(c=='sopping_ck'||c=='sopping_mypredict'){$('#confirm_define').attr('onClick',c+'('+a+','+b+',\''+e+'\')');}else{$('#confirm_define').attr('onClick',c+'('+a+','+b+')');}
$("#show_confirm").click();}
function m_game_click(){var x=0;$('#sballgame_m li').each(function(){if($(this).hasClass('current')){$('#sballgame li').eq(x).click();}
x++;});}
function bet_tai_fun(a,b,c,d,e,f,g,h,i,j){$('#show_bet_tai_1').text(a);if(g==''){$('#show_bet_tai_2').html(b);$('#show_bet_tai_3').html(c+'<span class="odds">'+h+'</span>');}else{$('#show_bet_tai_2').html(b+'<span class="odds">'+g+'</span>');$('#show_bet_tai_3').html(c);}
e1=(parseFloat(e)+1).toFixed(2).toString().substr(0,4);if(d==1){if(i==1){$('#show_bet_tai_4').html(b);}else{$('#show_bet_tai_4').html(b+'<span class="odds">賠率'+e1+'</span>');}}else{if(i==1){$('#show_bet_tai_4').html(c);}else{$('#show_bet_tai_4').html(c+'<span class="odds">賠率'+e1+'</span>');}}
$('#show_bet_tai_5').val(e);$('#show_bet_tai_6').val(f);$('#show_bet_tai_7').val(d);$('#show_wodds').val(i);$('#show_gameid').val(j);$('select#show_bet_tai_money')[0].selectedIndex=0;$('#money_win').html('可贏點數：0');$("#show_bet_tai").click();}
function bet_int_fun(a,b,c,d,e,f,g,h,i){$('#show_bet_tai_1').text(a);$('#show_bet_tai_2').html(b);$('#show_bet_tai_3').html(c);e1=(parseFloat(e)+1).toFixed(2).toString().substr(0,4);if(d==1){if(h==1){$('#show_bet_tai_4').html('大分 '+g);}else{$('#show_bet_tai_4').html('大分 '+g+'<span class="odds">賠率'+e1+'</span>');}}else{if(h==1){$('#show_bet_tai_4').html('小分 '+g);}else{$('#show_bet_tai_4').html('小分 '+g+'<span class="odds">賠率'+e1+'</span>');}}
$('#show_bet_tai_5').val(e);$('#show_bet_tai_6').val(f);$('#show_bet_tai_7').val(d);$('#show_wodds').val(h);$('#show_gameid').val(i);$('select#show_bet_tai_money')[0].selectedIndex=0;$('#money_win').html('可贏點數：0');$("#show_bet_tai").click();}
function money_odds(){$('#money_win').text('可贏點數：'+($('#show_bet_tai_money').val()*$('#show_bet_tai_5').val())+" (不含本金)");}
function save_betting(a){if($('#show_bet_tai_money').val()!='0'&&$('#show_bet_tai_money').val()!=''&&$('#show_bet_tai_money').val()!=null){$.ajax({url:'predict/save_Betting',data:{pgameid:$('#show_gameid').val(),pbetteam:$('#show_bet_tai_7').val(),pmoney:$('#show_bet_tai_money').val(),poddid:$('#show_bet_tai_6').val(),npaid:$('#npaid').prop('checked'),pwodds:$('#show_wodds').val()},type:'POST',dataType:'text'}).error(function(data){message_fun('投注儲存失敗');}).success(function(data){data1=data.substring(0,2);data2=data.substring(3);if(data1=='-1'){$('#login').click();}else if(data1=='-2'){message_fun('餘額不足');}else if(data1=='-3'){message_fun('儲存失敗');}else if(data1=='-4'){message_fun('同聯盟的單日比賽只能有一場投注1萬');}else if(data1=='-5'){message_fun('同聯盟的單日投注金額累積上限為2萬 (目前累積金額為 '+data2+')');}else if(data1=='-6'){message_fun('同賽事讓分和大小只能各下注一次');}else{$(a).next().click();}});}else{message_fun('請選擇投注點數');}}
function doing_add_show(a,b){$.ajax({url:'index.php/welcome/doing_add',data:{doing_id:a,doing_cash:b},type:'POST',dataType:'text'}).error(function(data){message_fun('傳輸錯誤!!');}).success(function(data){if(data=='1'){message_fun('成功參加!!',1);}else if(data=='2'){$('#login').click();}else if(data=='3'){message_fun('已參加獎金擂台賽!!');}else if(data=='5'){message_fun('參加人數已滿!!');}else if(data=='6'){message_fun('不好意思，你的點數不足喔!!(將自動轉到儲值頁面)',1,2);}else{message_fun('參加失敗，請稍後再試!!');}});}